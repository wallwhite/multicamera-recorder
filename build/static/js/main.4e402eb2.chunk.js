(this.webpackJsonpmulticam=this.webpackJsonpmulticam||[]).push([[0],{14:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),u=(n(14),n(1)),i=(n(17),n(4)),l=n.n(i),s=n(5),d=n(2),f=n(6),m=n.n(f),p=function(e){var t=e.className,n=void 0===t?"":t,c=Object(a.useState)(!1),o=Object(d.a)(c,2),u=o[0],i=o[1],f=Object(a.useState)(!1),p=Object(d.a)(f,2),v=p[0],b=p[1],E=Object(a.useState)(!1),j=Object(d.a)(E,2),O=j[0],g=j[1],h=Object(a.useState)(!1),y=Object(d.a)(h,2),R=y[0],k=y[1],w=Object(a.useRef)(),P=Object(a.useRef)(),L=Object(a.useRef)(),D=Object(a.useRef)(),S=Object(a.useRef)(),N=Object(a.useRef)(),U=Object(a.useRef)(!1),_=Object(a.useState)(null),x=Object(d.a)(_,2),M=x[0],C=x[1],T=function(e){!function(e,t){var n;n={video:!0},navigator.mediaDevices.getDisplayMedia?navigator.mediaDevices.getDisplayMedia(n).then(e).catch(t):navigator.getDisplayMedia(n).then(e).catch(t)}((function(t){var n,a;a=function(){window.stopCallback&&window.stopCallback()},(n=t).addEventListener("ended",(function(){a(),a=function(){}}),!1),n.addEventListener("inactive",(function(){a(),a=function(){}}),!1),n.getTracks().forEach((function(e){e.addEventListener("ended",(function(){a(),a=function(){}}),!1),e.addEventListener("inactive",(function(){a(),a=function(){}}),!1)})),e(t)}),(function(e){console.error(e),alert("Unable to capture your screen. Please check console logs.\n"+e)}))},B=function(){var e;i(!0),U.current=!0,e=function(e){var t=P.current;t.muted=!0,t.srcObject=e,t.autoplay=!0,D.current=e,N.current=m()(e,{type:"video",mimeType:"video/webm"}),T((function(e){var t=w.current;b(!0),L.current=e,t.muted=!0,t.autoplay=!0,t.srcObject=e,S.current=m()(e,{type:"video",mimeType:"video/webm"})}))},navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(e)},A=function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,Promise.all([N.current.startRecording(),S.current.startRecording()]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=P.current,n=w.current,!R){e.next=6;break}return e.next=5,Promise.all([t.pause(),n.pause()]);case 5:return e.abrupt("return");case 6:return e.next=8,Promise.all([t.play(),n.play()]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){u||B()}),[B,u]),r.a.createElement("div",null,r.a.createElement("div",{className:"recorder_videos ".concat(n)},r.a.createElement("video",{ref:w,onPlay:function(){O&&k(!0)},onPause:function(){O&&k(!1)},className:"recorder_videos__video"}),r.a.createElement("video",{ref:P,className:"recorder_videos__video"})),r.a.createElement("div",{className:"recorder_controls"},r.a.createElement("button",{onClick:A},"Start recording"),r.a.createElement("button",{onClick:function(e){e&&(e.preventDefault(),e.stopPropagation());var t=P.current,n=w.current;t.autoplay=!1,n.autoplay=!1,N.current.stopRecording((function(){var e=N.current.getBlob();t.srcObject=null,t.src=URL.createObjectURL(e),t.muted=!1,C(e),D.current.getTracks().forEach((function(e){e.stop()}))})),S.current.stopRecording((function(){var e=S.current.getBlob();n.srcObject=null,n.src=URL.createObjectURL(e),n.muted=!1,L.current.getTracks().forEach((function(e){e.stop()}))})),g(!0)},disabled:!v||O},"Stop recording"),r.a.createElement("button",{onClick:J,disabled:!O},R?"Pause":"Play"),M&&r.a.createElement("a",{href:"".concat(URL.createObjectURL(M)),download:"filename.mp4"},"Download")))};n(21);var v=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("p",null,"Multicamera recorder demo")),r.a.createElement(u.d,null,r.a.createElement(u.b,null,r.a.createElement(u.a,null,"Simple"),r.a.createElement(u.a,null,"PiP simulation")),r.a.createElement(u.c,null,r.a.createElement(p,null)),r.a.createElement(u.c,null,r.a.createElement(p,{className:"recorder-pip"}))))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root"))},9:function(e,t,n){e.exports=n(22)}},[[9,1,2]]]);
//# sourceMappingURL=main.4e402eb2.chunk.js.map